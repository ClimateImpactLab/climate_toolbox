# This file was autogenerated and will overwrite each time you run travis_pypi_setup.py
after_success:
- coverage combine
- coveralls
deploy:
  true:
    python: 3.6
    env:
        TEST_ENV=conda
    repo: ClimateImpactLab/climate_toolbox
    tags: true
  distributions: sdist bdist_wheel
  provider: pypi
  user: delgadom
  password:
    secure: !!binary |
      T08rME5qdHB2ZVlPN0hQbDFVb2tlL0xDNDVLMCtmYVMrNy9sRUJQbXlBc2hCVjkwdEdqblZDQ3c0
      Y1ZodzZlYVM2TnR4dzF0ZWhkcHZvRkRiMVVJTFhJaURYU2RoWXVGcC8wdmhyOCsvbGR6WUtkUFAv
      bjJBajlDR1VYK3NTcjM5NEgrY3RBczIyMTZ0clExdCtSVHJwOUc3YTRmVmdocVZyWkZNMlFadjFa
      ZC9jNnhUb2lhUm84VTZaU3B6Y0VBVnhQV21JRnB2K1Y0SVc3SEFVY0ExS2ROU2xZa3RwYzV5ZU1a
      WjJhdFBGTlp4anp5SklsQys3TW5kNzZoaW16S1JhQi96UENBMGRWVjZrQTJBNXFjblZUM2dhTjYy
      c3IvNFN5S3BwNHF5amtSVkthS3A1em9YUEJ4RHdTMjlZdFVRUUxCMSsrb3oxbDVhQjBsK0lpdlNB
      OExQOTluN1ZRYkJjODRraXhPbkswc3kvazFRdzVERmFGZUlTbWdORmw4di9oNCtnTmZVRnV2ZFo3
      N2lRS1o5YWNTMVAzaWk3WExFdll0dmpsVGR3VlI5aUlHZTFRMWR2UjFCamwzMFE1TGNwTmNOVWM1
      UURBSnB0VytvQUQ5aFpsV3hZN0FLZnVzd21zRmM2M21UaUgxNjVYRitCaHRJQmtRNFRpb25qVXAr
      QUlUVHZNTE1DYTdxZTVWb3JyTnBzQ2JqVmxJT29IRGNuelhYL2NySWZOTXRzQXgrYWhxR0FkTENH
      VXd2dk9XMmZ1RXJaQ25FOC9DZXBwaVJWdlN3MEpkUXBJS1VFUUFKSWhad09BRndCWGVDY0JaZkN3
      UU1MbGRuOEtxdlA3cjJMNHA5SWFMVDRiSHU0QTNTaU5WKzlITUsxYzJGOE51VXp1cUNPZ2FjNms9
env:
  matrix:
  - TEST_ENV=tox
  - TEST_ENV=conda
install:
- pip install --upgrade pip
- 'if [[ "$TEST_ENV" == "conda" ]]; then if [[ "$TRAVIS_PYTHON_VERSION" == "2.7" ]];
  then wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh
  -O miniconda.sh; else wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
  -O miniconda.sh; fi; bash miniconda.sh -b -p $HOME/miniconda; export PATH="$HOME/miniconda/bin:$PATH";
  hash -r; conda config --set always_yes yes --set changeps1 no; conda update -q conda;
  conda config --add channels conda-forge; conda info -a;

  conda create -q -n test-env python=$TRAVIS_PYTHON_VERSION; source activate test-env;

  python setup.py install; python -m pip install -r requirements_dev.txt; conda install
  --yes --file requirements_conda.txt; else pip install -U tox-travis; fi'
language: python
python:
- 3.6
- 3.5
- 2.7
script:
- if [[ "$TEST_ENV" == "conda" ]]; then export PATH=$HOME/miniconda/bin:$PATH; source
  activate test-env; python -m pytest; sphinx-apidoc -o docs climate_toolbox; sphinx-build
  -W -b html -d docs/_build/doctrees docs/. docs/_build/html; else tox; fi;
