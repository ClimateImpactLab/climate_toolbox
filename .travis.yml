# This file was autogenerated and will overwrite each time you run travis_pypi_setup.py
deploy:
  true:
    python: 2.7
    repo: ClimateImpactLab/climate_toolbox
    tags: true
  distributions: sdist bdist_wheel
  password:
    secure: QflWF856/iTx+Hb8KfKQ+PSiVkKeRE/Nm/eGI59b7E7y6fugAdlLG2RV9+9TOi1B+MauHqetLHPsahBmjT49O+apcVzhZesMTDqrvJRp7Pwtd9vhh85Koc3HUeO1SqApzUGg0Pv9GQibFlBMm909Xq5HKpOKrC4GMLJ/9pqfgOPGLYMiBuNa/mmby9YmCo+BxUMuJ7YAzMxiVkaCM4hjvdphF0KtbaS2KB237xe8jLqK6vBvNIF1q0M9L9Ziw579rDBDwMGG8h6Ti9WdhnMYZN5sKj3t61rsVNNbPPL2qH9N/gd66siEF/5fB8cEkP3oaSxt8YwC7FxCSEip6p2iW31S7rfzRsM9N79uB5qDJvxpi4DGkn185oXiHKafZAdJwtgiVN/Mt23n4i9rPb49CGTCIfpj2wxncyqXPW6NdL9j09zLjVzrHkFFAydrDzFWpNdYFbbkgnl1N3lYbLEl0/fUqe+BkNp10AQWGnAQ0Zbs20RpY03iBsxySOKc5dFsV76jTfWZRcrFteh18oGkYm7RWu5+zPApfb10dDXhjKOVgp9sPVrx38QZO+wHCnB7Ax6nr4NBgqRpgrG0+oy1n+mf+6sFgEfRk+Ij/V5KjkSU1bdKhXGguyyXYPjb9w5IDSJxEJjj1jQaVMM0ISTmA6ZA6sMTGY3IHm4ODh8Eb/s=
  provider: pypi
  user: justin_gerard
env:
  matrix:
  - TEST_ENV=tox
  - TEST_ENV=conda
install:
- pip install --upgrade pip
- 'if [[ "$TEST_ENV" == "conda" ]]; then if [[ "$TRAVIS_PYTHON_VERSION" == "2.7" ]];
  then wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh
  -O miniconda.sh; else wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
  -O miniconda.sh; fi; bash miniconda.sh -b -p $HOME/miniconda; export PATH="$HOME/miniconda/bin:$PATH";
  hash -r; conda config --set always_yes yes --set changeps1 no; conda update -q conda;
  conda config --add channels conda-forge; conda info -a;

  conda create -q -n test-env python=$TRAVIS_PYTHON_VERSION; source activate test-env;

  python setup.py install; python -m pip install -r requirements_dev.txt; conda install
  --yes --file requirements_conda.txt; else pip install -U tox-travis; fi'
language: python
matrix:
  allow_failures:
  - env: TEST_ENV=conda
    python: 3.4
python:
- 3.5
- 3.4
- 2.7
script:
- if [[ "$TEST_ENV" == "conda" ]]; then export PATH=$HOME/miniconda/bin:$PATH; source
  activate test-env; python -m pytest; sphinx-apidoc -o docs climate_toolbox; sphinx-build
  -W -b html -d docs/_build/doctrees docs/. docs/_build/html; else tox; fi;

after_success:
  - coverage combine
  - coveralls
